<div class="forgot-password-container">
  <div class="forgot-password-card">
    <div class="forgot-password-header">
      <div class="logo-section">
        <img src="https://res.cloudinary.com/ddkvhnj27/image/upload/v1758400063/z7019344847597_aa447955326b74efcd30844f0ddafb97_mcbqgu.jpg" 
             alt="GreenCharger Logo" 
             class="auth-logo" />
        <h2>Quên Mật Khẩu</h2>
      </div>
      <p *ngIf="!emailSent">Nhập email của bạn để nhận liên kết khôi phục mật khẩu</p>
      <p *ngIf="emailSent">Kiểm tra email của bạn để khôi phục mật khẩu</p>
    </div>

    <div *ngIf="!emailSent">
      <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()" class="forgot-password-form">
        <div class="form-group">
          <label for="email">Email</label>
          <input
            type="email"
            id="email"
            formControlName="email"
            class="form-control"
            [class.error]="getFieldError('email')"
            placeholder="Nhập email của bạn"
          />
          <div class="error-message" *ngIf="getFieldError('email')">
            {{ getFieldError('email') }}
          </div>
        </div>

        <div class="error-message global-error" *ngIf="errorMessage">
          {{ errorMessage }}
        </div>

        <div class="success-message" *ngIf="successMessage">
          {{ successMessage }}
        </div>

        <button
          type="submit"
          class="forgot-password-btn"
          [disabled]="isLoading"
          [class.loading]="isLoading"
        >
          <span *ngIf="!isLoading">Gửi Email Khôi Phục</span>
          <span *ngIf="isLoading">Đang gửi...</span>
        </button>
      </form>
    </div>

    <div *ngIf="emailSent" class="email-sent-section">
      <div class="success-icon">✓</div>
      <div class="success-message">
        {{ successMessage }}
      </div>
      <button
        type="button"
        class="resend-btn"
        (click)="resendEmail()"
      >
        Gửi lại email
      </button>
    </div>

    <div class="forgot-password-footer">
      <button type="button" class="back-to-login-btn" (click)="backToLogin()">
        ← Quay lại đăng nhập
      </button>
    </div>

    <!-- Back to Home Button -->
    <div class="back-to-home">
      <a routerLink="/home" class="back-home-btn">
        ← Quay về trang chủ
      </a>
    </div>
  </div>
</div>
