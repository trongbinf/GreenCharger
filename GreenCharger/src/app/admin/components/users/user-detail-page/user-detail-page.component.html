<div class="user-detail-container" *ngIf="!loading && user">
  <!-- Header -->
  <div class="page-header">
    <div class="header-left">
      <button class="btn-back" (click)="onBackToList()">
        <i class="fas fa-arrow-left"></i>
        Quay lại danh sách
      </button>
      <h1>Chi tiết người dùng</h1>
    </div>
    <div class="header-actions">
      
      <button 
        class="btn" 
        [ngClass]="isUserLocked() ? 'btn-success' : 'btn-warning'"
        (click)="onToggleLock()">
        <i class="fas" [ngClass]="isUserLocked() ? 'fa-unlock' : 'fa-lock'"></i>
        {{ isUserLocked() ? 'Mở khóa' : 'Khóa' }}
      </button>
    </div>
  </div>

  <!-- User Info Card -->
  <div class="user-info-card">
    <div class="user-avatar-section">
      <div class="user-avatar">
        <i class="fas fa-user"></i>
      </div>
      <div class="user-basic-info">
        <h2>{{ getFullName() }}</h2>
        <p class="user-email">{{ user.email }}</p>
        <div class="status-badges">
          <span class="status-badge" [ngClass]="getEmailStatusClass()">
            {{ getEmailStatusText() }}
          </span>
          <span class="status-badge" [ngClass]="getStatusClass()">
            {{ getStatusText() }}
          </span>
        </div>
      </div>
    </div>
  </div>

  <!-- User Details Grid -->
  <div class="user-details-grid">
    <!-- Personal Information -->
    <div class="detail-card">
      <div class="card-header">
        <h3><i class="fas fa-user"></i> Thông tin cá nhân</h3>
      </div>
      <div class="card-content">
        <div class="info-row">
          <label>Họ:</label>
          <span>{{ user.firstName || 'Không có' }}</span>
        </div>
        <div class="info-row">
          <label>Tên:</label>
          <span>{{ user.lastName || 'Không có' }}</span>
        </div>
        <div class="info-row">
          <label>Email:</label>
          <span>{{ user.email || 'Không có' }}</span>
        </div>
        <div class="info-row">
          <label>Số điện thoại:</label>
          <span>{{ user.phoneNumber || 'Không có' }}</span>
        </div>
      </div>
    </div>

    <!-- Account Information -->
    <div class="detail-card">
      <div class="card-header">
        <h3><i class="fas fa-shield-alt"></i> Thông tin tài khoản</h3>
      </div>
      <div class="card-content">
        <div class="info-row">
          <label>ID người dùng:</label>
          <span class="user-id">{{ user.id }}</span>
        </div>
        <div class="info-row">
          <label>Trạng thái email:</label>
          <span [ngClass]="getEmailStatusClass()">{{ getEmailStatusText() }}</span>
        </div>
        <div class="info-row">
          <label>Trạng thái tài khoản:</label>
          <span [ngClass]="getStatusClass()">{{ getStatusText() }}</span>
        </div>
      </div>
    </div>

    <!-- Timestamps -->
    <div class="detail-card">
      <div class="card-header">
        <h3><i class="fas fa-clock"></i> Thông tin thời gian</h3>
      </div>
      <div class="card-content">
        <div class="info-row">
          <label>Ngày tạo:</label>
          <span>{{ user.createdAt | date:'dd/MM/yyyy HH:mm:ss' }}</span>
        </div>
        <div class="info-row">
          <label>Cập nhật lần cuối:</label>
          <span>{{ user.updatedAt | date:'dd/MM/yyyy HH:mm:ss' }}</span>
        </div>
        <div class="info-row" *ngIf="isUserLocked()">
          <label>Ngày khóa:</label>
          <span>{{ user.lockoutEnd | date:'dd/MM/yyyy HH:mm:ss' }}</span>
        </div>
      </div>
    </div>

    <!-- System Information -->
    <div class="detail-card">
      <div class="card-header">
        <h3><i class="fas fa-cog"></i> Thông tin hệ thống</h3>
      </div>
      <div class="card-content">
        <div class="info-row">
          <label>Khóa tài khoản:</label>
          <span [ngClass]="getStatusClass()">{{ user.lockoutEnabled ? 'Có' : 'Không' }}</span>
        </div>
        <div class="info-row">
          <label>Xác thực email:</label>
          <span [ngClass]="getEmailStatusClass()">{{ user.emailConfirmed ? 'Có' : 'Không' }}</span>
        </div>
        <div class="info-row">
          <label>Xác thực số điện thoại:</label>
          <span>Không</span>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Loading State -->
<div class="loading-container" *ngIf="loading">
  <div class="loading-spinner">
    <i class="fas fa-spinner fa-spin"></i>
    <p>Đang tải thông tin người dùng...</p>
  </div>
</div>

<!-- Error State -->
<div class="error-container" *ngIf="error && !loading">
  <div class="error-content">
    <i class="fas fa-exclamation-triangle"></i>
    <h3>Không thể tải thông tin</h3>
    <p>{{ error }}</p>
    <button class="btn btn-primary" (click)="loadUser()">
      <i class="fas fa-refresh"></i>
      Thử lại
    </button>
  </div>
</div>
