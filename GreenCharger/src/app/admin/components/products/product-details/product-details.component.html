<div class="modal-overlay" *ngIf="isVisible">
  <div class="modal-content">
    <div class="modal-header">
      <h5 class="modal-title">Chi tiết sản phẩm</h5>
      <button type="button" class="close-btn" (click)="onClose()">
        <i class="fas fa-times"></i>
      </button>
    </div>
      <div class="modal-body">
        <div *ngIf="!product" class="empty-state">
          <i class="anticon anticon-inbox"></i>
          <p>Không có dữ liệu</p>
        </div>

        <div *ngIf="product" class="product-details">
          <div class="product-images">
            <div class="main-image">
              <!-- Main image display -->
              <img *ngIf="product.mainImageUrl" [src]="product.mainImageUrl" [alt]="product.name" class="product-image">
              <div *ngIf="!product.mainImageUrl" class="no-image">
                <i class="fas fa-image"></i>
                <p>Chưa có ảnh</p>
              </div>
            </div>
            
            <!-- Detail images display -->
            <div class="detail-images" *ngIf="product.detailImageUrls && product.detailImageUrls.length > 0">
              <h6>Ảnh chi tiết:</h6>
              <div class="detail-images-grid">
                <div class="detail-image-item" *ngFor="let url of product.detailImageUrls">
                  <img [src]="url" [alt]="product.name" class="detail-image">
                </div>
              </div>
            </div>
          </div>

          <div class="product-info">
            <h2 class="product-name">{{ product.name }}</h2>
            
            <div class="detail-row">
              <span class="detail-label">Mã sản phẩm:</span>
              <span class="detail-value">{{ product.id }}</span>
            </div>
            
            <div class="detail-row price-row">
              <span class="detail-label">Giá:</span>
              <span class="detail-value price">{{ formatCurrency(product.price) }}</span>
              <span class="detail-value discount-price" *ngIf="product.discountPrice && product.discountPrice > 0">
                {{ formatCurrency(product.discountPrice) }}
              </span>
            </div>
            
            <div class="detail-row" *ngIf="product.discount && product.discount > 0">
              <span class="detail-label">Giảm giá:</span>
              <span class="detail-value discount">{{ product.discount }}%</span>
            </div>
            
            <div class="detail-row">
              <span class="detail-label">Số lượng:</span>
              <span class="detail-value stock" [class.low-stock]="product.stockQuantity < 10">
                {{ product.stockQuantity }}
              </span>
            </div>
            
            <div class="detail-row">
              <span class="detail-label">Danh mục:</span>
              <span class="detail-value category">{{ product.categoryName }}</span>
            </div>
            
            <div class="detail-row">
              <span class="detail-label">Trạng thái:</span>
              <span class="detail-value status" [class.active]="product.isActive" [class.inactive]="!product.isActive">
                {{ product.isActive ? 'Hoạt động' : 'Ngừng hoạt động' }}
              </span>
            </div>
            
            <div class="detail-row">
              <span class="detail-label">Đánh giá:</span>
              <span class="detail-value rating">
                <i class="fas fa-star"></i>
                {{ product.averageRating ? product.averageRating.toFixed(1) : '0.0' }}
                ({{ product.reviewCount || 0 }} đánh giá)
              </span>
            </div>
            
            <div class="detail-row description-row">
              <span class="detail-label">Mô tả:</span>
              <div class="detail-value description" [innerHTML]="product.description"></div>
            </div>
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="onClose()">
          <i class="fas fa-times"></i>
          Đóng
        </button>
      </div>
  </div>
</div>
